Εδώ υπάρχει το Υλικό (Block διαγράμματα και ηλεκρονικά - ηλεκτρολογικά σχέδια) και Λογισμικό για τα υποσυστήματα μέσα στο θεμοκήπιο.
Μέσα σε κάθε θερμοκήπιο υπάρχει ένας κόμβος ο οποίος επικοινωνεί μέσω LoRa με την πύλη LoRa Wan. Ο κόμβος κάνει μετρήσεις μέσω των αισθητήρων σε τακτά χρονικά διαστήματα π.χ. 60 sec και τις στέλνει στην πύλη. Η πύλη στέλνει τις μετρήσεις στο διαδίκτυο σε κάποιον δικό μας server τον οποίο θα ονομάζουμε Network Server (NW Server). Αυτός μετατρέπει τα μηνήματα LoRa Wan σε μηνύματα MQTT τα οποία τα προωθεί σε κάποιον MQTT broker π.χ. mosquitto. Στον ίδιο server ή σε κάποιον άλλο τρέχει το Node Red το οποίο είναι υπεύθυνο για την υλοποίηση της λογικής όλου του συστήματος μέσα από γραφικό προγραμματισμό.<br>
Οι αποφάσεις ακολουθούν αντίθετη κατεύθυνση. Δηλαδή το Node Red δημοσιεύει σε κάποιο topic MQTT το οποίο το παρακολουθεί και ο NW Server. Αυτός μεταφράζει το μήνυμα σε πλαίσιο LoRa Wan το οποίο στέλνει στην πύλη μέσω διαδικτύου. Τέλος η πύλη στέλνει το μήνυμα στον κόμβο αποδέκτη και αυτός εκτελεί μια ενέργεια π.χ. ξεκινάει πότισμα ή μαζεύει την σκίαση.<br>
<center><img src="https://github.com/stav98/ETHIC/blob/master/Thermo_Node/ethic1.png" width="700"></center><br>

Η υλοποίηση
===========
Όπως φαίνεται στο παραπάνω διάγραμμα η καρδιά του κόμβου είναι το Node MCU με το ESP8266. Αυτό επικοινωνεί με το LoRa module RA01 ή RA02 μέσω διασύνδεσης SPI. Επειδή το ESP8266 έχει περιορισμένο αριθμό ακροδεκτών, επικοινωνεί μέσω διαύλου I2C με ένα Arduino Uno το οποίο κάνει κάποιες εργασίες χαμηλού επιπέδου, ακολουθώντας τις εντολές του ESP8266. Επειδή και πάλι οι ακροδέκτες δεν επαρκούν, βάλαμε και ένα HC595 ως port expander ώστε να έχουμε επιπλέον 8 ψηφιακές εξόδους.
